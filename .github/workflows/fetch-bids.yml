- name: Write Google Service Account key
  run: |
    cat > service_account.json <<'JSON'
    ${{ secrets.GOOGLE_SA_JSON }}
    JSON

- name: Inspect key (size & first-char only)
  run: |
    python - <<'PY'
    import os,sys
    p='service_account.json'
    if not os.path.exists(p):
        print('❌ service_account.json not found'); sys.exit(2)
    data=open(p,'rb').read()
    print('Key file bytes:', len(data))
    if not data:
        print('❌ Key file is empty'); sys.exit(3)
    first = chr(data[0])
    print('First character:', first)
    if first != '{':
        print('❌ Key does not start with "{"'); sys.exit(4)
    print('✅ Shape looks good')
    PY
